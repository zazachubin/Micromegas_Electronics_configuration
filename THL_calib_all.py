from pprint import pprint
import json

config_data = {'ip': [8,8,8,8,8,8,8,8,
                        9,9,9,9,9,9,9,9,
                        10,10,10,10,10,10,10,10,
                        11,11,11,11,11,11,11,11,
                        12,12,12,12,12,12,12,12,
                        13,13,13,13,13,13,13,13,
                        14,14,14,14,14,14,14,14,
                        15,15,15,15,15,15,15,15,
                        24,24,24,24,24,24,24,24,
                        25,25,25,25,25,25,25,25,
                        26,26,26,26,26,26,26,26],

                'chip' : [0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7,
                          0,1,2,3,4,5,6,7],

                'baseline' : [169.0,169.7,162.6,159.9,169.8,169.9,170.1,164.7,
                              151.9,137.0,136.4,136.1,135.1,143.5,146.3,154.2,
                              177.6,163.1,158.7,176.5,174.8,169.9,169.2,167.3,
                              146.0,144.0,153.7,145.3,139.2,143.0,147.8,155.1,
                              167.3,162.9,164.9,168.1,169.6,168.8,165,165.3,
                              166.7,168.5,169.1,169.0,166.1,164.3,175.8,175.0,
                              169.6,162.0,155.9,165.6,162.9,163.4,175.0,171.1,
                              171.6,166.3,166.4,171.6,159.9,162.7,173.0,173.5,
                              123.0,124.0,125.0,126.0,127.0,128.0,129.0,130.0,
                              123.0,124.0,125.0,126.0,127.0,128.0,129.0,130.0,
                              123.0,124.0,125.0,126.0,127.0,128.0,129.0,130.0],

                'A' : [ 
                        0.777839,0.786855,0.756848,0.762877,0.788991,0.776178,0.780872,0.764563,
                        0.797338,0.741050,0.751792,0.754529,0.752071,0.781329,0.765786,0.794769,
                        0.817000,0.752000,0.737000,0.812000,0.785000,0.783000,0.781000,0.756000,
                        0.802354,0.793240,0.817659,0.782697,0.754749,0.747176,0.786444,0.799744,
                        0.786752,0.759590,0.781296,0.783666,0.798843,0.777905,0.760531,0.756289,
                        0.759679,0.789078,0.805322,0.791758,0.778653,0.763032,0.824946,0.788861,
                        0.805444,0.761035,0.715951,0.782559,0.752659,0.746234,0.800861,0.792409,
                        0.794316,0.770550,0.766247,0.796096,0.743426,0.763469,0.795514,0.807198,
                        1.000000,2.000000,3.000000,4.000000,5.000000,6.000000,7.000000,8.000000,
                        1.000000,2.000000,3.000000,4.000000,5.000000,6.000000,7.000000,8.000000,
                        1.000000,2.000000,3.000000,4.000000,5.000000,6.000000,7.000000,8.000000],

                'B' : [
                        31.334000,35.836800,22.112700,16.484400,21.873200,30.630800,33.633200,29.341700,
                        2.684510,-8.322070,4.057750,-9.007890,1.472750,-6.959510,5.955710,20.043700,
                        18.800000,20.300000,20.900000,35.100000,51.800000,31.300000,12.500000,37.200000,
                        7.073110,5.084670,21.833000,-8.711350,-6.244090,8.324270,-6.701650,12.978200,
                        16.216129,26.010086,24.199014,21.879062,17.792682,34.688003,18.567998,29.257629,
                        34.864585,26.848884,7.130150,16.765632,19.088722,21.569545,19.602851,54.309501,
                        26.365238,23.365907,25.589778,19.476038,12.170790,29.230426,32.266288,17.247736,
                        25.746095,23.852342,28.545713,21.381889,29.536119,17.936908,35.968914,19.757965,
                        1.000000,2.000000,3.000000,4.000000,5.000000,6.000000,7.000000,8.000000,
                        1.000000,2.000000,3.000000,4.000000,5.000000,6.000000,7.000000,8.000000,
                        1.000000,2.000000,3.000000,4.000000,5.000000,6.000000,7.000000,8.000000],
                'gain' : { 0.5 : 0, 1 : 1, 3 : 2, 4.5 : 3, 6 : 4, 9 : 5 },
                'peacking_time' : { 200 : 0, 100 : 1, 50 : 2, 24 : 3}
}

print(config_data['ip'])
print(config_data['chip'])
print(config_data['baseline'])
print(config_data['A'])
print(config_data['B'])

print(config_data['gain'][0.5])
print(config_data['peacking_time'][200])

AA = []
for i in range(len(config_data['A'])):
    AA.append(round(1 / config_data['A'][i],2))

BB = []
for i in range(len(config_data['B'])):
    BB.append(round(-config_data['B'][i] / config_data['A'][i],2))

threshold = 50

sdt_dac_arr = []

for i in range(len(AA)):
    sdt_dac_arr.append(int(round(AA[i] * (config_data['baseline'][i] + threshold) +  BB[i])))

print(sdt_dac_arr)

with open('data.json','w') as f:
    json.dump(config_data, f, indent=4)

with open('data.json','r') as f:
    config_data = json.load(f)

print(config_data)